import{I as d,C as a,u,r as p}from"./index-Cb938nQD.js";import{G as h}from"./glTFLoader-C0uRvnkq.js";import"./objectModelMapping-D8Z0jr_m.js";const t="KHR_materials_unlit";class c{constructor(r){this.name=t,this.order=210,this._loader=r,this.enabled=this._loader.isExtensionUsed(t)}dispose(){this._loader=null}loadMaterialPropertiesAsync(r,o,e){return h.LoadExtensionAsync(r,o,this.name,()=>this._loadUnlitPropertiesAsync(r,o,e))}_loadUnlitPropertiesAsync(r,o,e){if(!(e instanceof d))throw new Error(`${r}: Material type not supported`);const n=new Array;e.unlit=!0;const s=o.pbrMetallicRoughness;return s&&(s.baseColorFactor?(e.albedoColor=a.FromArray(s.baseColorFactor),e.alpha=s.baseColorFactor[3]):e.albedoColor=a.White(),s.baseColorTexture&&n.push(this._loader.loadTextureInfoAsync(`${r}/baseColorTexture`,s.baseColorTexture,l=>{l.name=`${e.name} (Base Color)`,e.albedoTexture=l}))),o.doubleSided&&(e.backFaceCulling=!1,e.twoSidedLighting=!0),this._loader.loadMaterialAlphaProperties(r,o,e),Promise.all(n).then(()=>{})}}u(t);p(t,!0,i=>new c(i));export{c as KHR_materials_unlit};
