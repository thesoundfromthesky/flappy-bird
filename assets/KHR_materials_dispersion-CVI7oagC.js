import{I as p,u as d,r as u}from"./index-Cb938nQD.js";import{G as l}from"./glTFLoader-C0uRvnkq.js";import"./objectModelMapping-D8Z0jr_m.js";const o="KHR_materials_dispersion";class c{constructor(r){this.name=o,this.order=174,this._loader=r,this.enabled=this._loader.isExtensionUsed(o)}dispose(){this._loader=null}loadMaterialPropertiesAsync(r,e,s){return l.LoadExtensionAsync(r,e,this.name,(i,a)=>{const t=new Array;return t.push(this._loader.loadMaterialPropertiesAsync(r,e,s)),t.push(this._loadDispersionPropertiesAsync(i,e,s,a)),Promise.all(t).then(()=>{})})}_loadDispersionPropertiesAsync(r,e,s,i){if(!(s instanceof p))throw new Error(`${r}: Material type not supported`);return!s.subSurface.isRefractionEnabled||!i.dispersion||(s.subSurface.isDispersionEnabled=!0,s.subSurface.dispersion=i.dispersion),Promise.resolve()}}d(o);u(o,!0,n=>new c(n));export{c as KHR_materials_dispersion};
